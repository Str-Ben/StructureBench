# Minimal Penman CFG for outlines / xgrammar-compatible constrained generation
# Goal: enforce core Penman structure ( (var / concept [:role child]*) )
# Keep it small so generation is tractable.

start: graph

# A graph can be multiple top-level graphs concatenated, but we allow just one
graph: node                    # single-root graph

node: "(" var WS? "/" WS? concept role_block* ")"

role_block: WS? ":" role_name WS child

child: node | literal | var | concept

# ----- Terminals -----
WS: " "*                    # we rely on tokenizer for spaces; here mark optional
var: /[a-z][0-9]?/            # p, p2, s, s3  (one letter + optional digit)
concept: /[A-Za-z0-9_\-]+/    # word, report-01 etc.
role_name: /[A-Z0-9a-z_\-]+/  # ARG0, time, location
literal: string | number | "-"
string: "\"" /[A-Za-z0-9_ \-]+/ "\""
number: /[0-9]+/

